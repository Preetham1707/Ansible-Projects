---
- name: Install > Create the ZAP temp directory 
  ansible.windows.win_file:
    path: "{{Zap_temp_path}}"
    state: directory
  register: Zap_directory_creation
  until: Zap_directory_creation is succeeded
  retries: 5
  delay: 2
  check_mode: false

- name: Install > Downloading Zap Binary
  ansible.windows.win_get_url:
    url: "{{Zap_binary_url}}"
    dest: "{{Zap_temp_path}}"
  register: Zap_download_task
  until: Zap_download_task is succeeded
  retries: 5
  delay: 2
  check_mode: false



- name: Install > Unzip Zap Binary
  win_unzip:
    src: "{{Zap_temp_path}}\\ZAP_2.14.0_Crossplatform.zip"
    dest: "{{zap_destination_path}}"
  register: Zap_extract_task
  until: Zap_extract_task is succeeded
  retries: 5
  delay: 2
  check_mode: false


